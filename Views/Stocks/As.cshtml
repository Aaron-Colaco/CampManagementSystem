@model IEnumerable<WebApplication4.Models.OrderItem>

@{
    ViewData["Title"] = "Index";
}
<div style="display: flex; justify-content: center; align-items: center; gap: 30px; margin-top: 50px;">

    <div style="background-color: #f4f7fa; border-radius: 10px; padding: 20px; width: 200px; text-align: center; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); transition: transform 0.3s ease, box-shadow 0.3s ease;">
        <h3 style="font-size: 18px; color: #333; margin-bottom: 10px;">Total Gear Requested</h3>
        <p style="font-size: 24px; font-weight: bold; color: #2b7a78; margin-top: 10px;">@ViewBag.GearRequestedNumber</p>
    </div>

    <div style="background-color: #f4f7fa; border-radius: 10px; padding: 20px; width: 200px; text-align: center; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); transition: transform 0.3s ease, box-shadow 0.3s ease;">
        <h3 style="font-size: 18px; color: #333; margin-bottom: 10px;">Available Stock</h3>
        <p style="font-size: 24px; font-weight: bold; color: #2b7a78; margin-top: 10px;">@ViewBag.StockNumber</p>
    </div>
</div>


<table class="table">
    <thead>
        <tr>
            <th>Item</th>
            <th>Stock Allocation</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var orderItem in Model)
        {
            if (!orderItem.GearAssigned)
            {
                <tr>

                    <td>@orderItem.Items.Name</td>
                    <td>
                        
                        <form asp-action="a2">
                            <input type="hidden" value="@orderItem.OrderId" name="OrderId"/>
                            <label for="stock-@orderItem.ItemId">Select Item</label>
                            <select name="StockId" class="form-select" onchange="this.form.submit()">
                                <option value="" disabled selected>Select an option</option>
                                @foreach (var stock in ViewBag.Stock)
                                {
                                    if (stock.ItemId == orderItem.ItemId)
                                    {
                                        <option value="@stock.StockId">
                                            @orderItem.Items.Name (@stock.StockId)
                                        </option>
                                    }
                                }
                            </select>
                        </form>
                    </td>
                </tr>
            }
        }

      
    </tbody>
</table>

<table class="table">
    <thead>
        <tr>
            <th colspan="2" style="background-color: lightgreen;">
                <strong>Allocated Stock:</strong>
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var userStock in ViewBag.UserStock)
        {
            <tr>
                <td>
                    @userStock.Items.Name - @userStock.StockId
                </td>
                <td>
                    <form asp-action="UA">
                        <input type="hidden" value="@Model.FirstOrDefault().OrderId" name="OrderId" />
                        <input type="hidden" value="@userStock.StockId" name="StockId" />
                        <input type="submit" value="Unassign" class="btn btn-primary" style="background-color: red"/>
                    </form>
                </td>
            </tr>
        }
    </tbody>
</table>
